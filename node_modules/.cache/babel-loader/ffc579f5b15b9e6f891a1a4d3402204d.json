{"ast":null,"code":"import { useCallback, useEffect, useState } from 'react';\nimport { BigNumber } from 'bignumber.js';\nimport { useWallet } from 'use-wallet';\nimport { getWethPrice, getBaoPrice } from '../quic/utils';\nimport useLockedEarnings from './useLockedEarnings';\nimport useBao from './useQuic';\n\nconst useSubValues = () => {\n  const {\n    account\n  } = useWallet();\n  const bao = useBao(); //const wethPriceContract = getWethPriceContract(bao)\n  //const baoPriceContract = getBaoPriceContract(bao)\n\n  const locks = useLockedEarnings();\n  const [usrSubText, setUsrSubText] = useState(new String());\n  const [baoPrices, setBaoPrices] = useState(new BigNumber(0));\n  const [wethPrices, setWethPrices] = useState(new BigNumber(0));\n  const getInfo = useCallback(async () => {\n    if (bao) {\n      const wethPriceFun = getWethPrice(bao).then(response => {\n        setWethPrices(response);\n        const baoPriceFun = getBaoPrice(bao).then(response => {\n          setBaoPrices(response);\n          const currentRate = wethPrices.dividedBy(100000000).dividedBy(baoPrices);\n          const userValue = currentRate.multipliedBy(locks.dividedBy(1000000000000000000));\n          const dailyPrice = userValue.dividedBy(1095).toFormat(2);\n          console.log(dailyPrice + ' dailyPrice');\n          console.log(wethPrices + ' wethprice');\n          console.log(baoPrices + ' baoPrice');\n          const annualPrice = userValue.dividedBy(3).toFormat(2);\n          console.log(annualPrice + ' annual');\n          const wethText = userValue.toFormat(2);\n          const usrSubText = 'When this unlocks it will earn you $' + dailyPrice + ' per day for 3 years. The equivalent of $' + annualPrice + ' per year!';\n          setUsrSubText(usrSubText);\n        });\n      });\n    }\n  }, [locks, usrSubText]);\n  useEffect(() => {\n    if (account && bao) {\n      getInfo();\n    }\n  }, [account, bao, locks, usrSubText]);\n  return usrSubText.toString();\n};\n\nexport default useSubValues;","map":{"version":3,"sources":["/Users/mark.wagner/Dropbox/projects/quic.finance/client/src/hooks/useSubValues.ts"],"names":["useCallback","useEffect","useState","BigNumber","useWallet","getWethPrice","getBaoPrice","useLockedEarnings","useBao","useSubValues","account","bao","locks","usrSubText","setUsrSubText","String","baoPrices","setBaoPrices","wethPrices","setWethPrices","getInfo","wethPriceFun","then","response","baoPriceFun","currentRate","dividedBy","userValue","multipliedBy","dailyPrice","toFormat","console","log","annualPrice","wethText","toString"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,SAAtB,EAAiCC,QAAjC,QAAiD,OAAjD;AAGA,SAASC,SAAT,QAA0B,cAA1B;AACA,SAASC,SAAT,QAA0B,YAA1B;AAEA,SACEC,YADF,EAEEC,WAFF,QAKO,eALP;AAMA,OAAOC,iBAAP,MAA8B,qBAA9B;AACA,OAAOC,MAAP,MAAmB,WAAnB;;AAGA,MAAMC,YAAY,GAAG,MAAM;AACzB,QAAM;AAAEC,IAAAA;AAAF,MAAmCN,SAAS,EAAlD;AACA,QAAMO,GAAG,GAAGH,MAAM,EAAlB,CAFyB,CAGzB;AACA;;AACA,QAAMI,KAAK,GAAGL,iBAAiB,EAA/B;AACA,QAAM,CAACM,UAAD,EAAaC,aAAb,IAA8BZ,QAAQ,CAAC,IAAIa,MAAJ,EAAD,CAA5C;AACA,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4Bf,QAAQ,CAAC,IAAIC,SAAJ,CAAc,CAAd,CAAD,CAA1C;AACA,QAAM,CAACe,UAAD,EAAaC,aAAb,IAA8BjB,QAAQ,CAAC,IAAIC,SAAJ,CAAc,CAAd,CAAD,CAA5C;AAEA,QAAMiB,OAAO,GAAGpB,WAAW,CAAC,YAAY;AACtC,QAAIW,GAAJ,EAAS;AACP,YAAMU,YAAY,GAAGhB,YAAY,CAACM,GAAD,CAAZ,CAAkBW,IAAlB,CAAwBC,QAAD,IAAc;AACxDJ,QAAAA,aAAa,CAACI,QAAD,CAAb;AAEA,cAAMC,WAAW,GAAGlB,WAAW,CAACK,GAAD,CAAX,CAAiBW,IAAjB,CAAuBC,QAAD,IAAc;AACtDN,UAAAA,YAAY,CAACM,QAAD,CAAZ;AACA,gBAAME,WAAW,GAAGP,UAAU,CAC3BQ,SADiB,CACP,SADO,EAEjBA,SAFiB,CAEPV,SAFO,CAApB;AAGA,gBAAMW,SAAS,GAAGF,WAAW,CAACG,YAAZ,CAChBhB,KAAK,CAACc,SAAN,CAAgB,mBAAhB,CADgB,CAAlB;AAGA,gBAAMG,UAAU,GAAGF,SAAS,CAACD,SAAV,CAAoB,IAApB,EAA0BI,QAA1B,CAAmC,CAAnC,CAAnB;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAYH,UAAU,GAAG,aAAzB;AACAE,UAAAA,OAAO,CAACC,GAAR,CAAYd,UAAU,GAAG,YAAzB;AACAa,UAAAA,OAAO,CAACC,GAAR,CAAYhB,SAAS,GAAG,WAAxB;AACA,gBAAMiB,WAAW,GAAGN,SAAS,CAACD,SAAV,CAAoB,CAApB,EAAuBI,QAAvB,CAAgC,CAAhC,CAApB;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAYC,WAAW,GAAG,SAA1B;AACA,gBAAMC,QAAQ,GAAGP,SAAS,CAACG,QAAV,CAAmB,CAAnB,CAAjB;AACA,gBAAMjB,UAAU,GACd,yCACAgB,UADA,GAEA,2CAFA,GAGAI,WAHA,GAIA,YALF;AAMAnB,UAAAA,aAAa,CAACD,UAAD,CAAb;AACD,SAtBmB,CAApB;AAuBD,OA1BoB,CAArB;AA2BD;AACF,GA9B0B,EA8BxB,CAACD,KAAD,EAAQC,UAAR,CA9BwB,CAA3B;AAgCAZ,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIS,OAAO,IAAIC,GAAf,EAAoB;AAClBS,MAAAA,OAAO;AACR;AACF,GAJQ,EAIN,CAACV,OAAD,EAAUC,GAAV,EAAeC,KAAf,EAAsBC,UAAtB,CAJM,CAAT;AAMA,SAAOA,UAAU,CAACsB,QAAX,EAAP;AACD,CAjDD;;AAmDA,eAAe1B,YAAf","sourcesContent":["import { useCallback, useEffect, useState } from 'react'\nimport { provider } from 'web3-core'\n\nimport { BigNumber } from 'bignumber.js'\nimport { useWallet } from 'use-wallet'\n\nimport {\n  getWethPrice,\n  getBaoPrice,\n  getWethPriceContract,\n  getBaoPriceContract,\n} from '../quic/utils'\nimport useLockedEarnings from './useLockedEarnings'\nimport useBao from './useQuic'\nimport useBlock from './useBlock'\n\nconst useSubValues = () => {\n  const { account }: { account: string } = useWallet()\n  const bao = useBao()\n  //const wethPriceContract = getWethPriceContract(bao)\n  //const baoPriceContract = getBaoPriceContract(bao)\n  const locks = useLockedEarnings()\n  const [usrSubText, setUsrSubText] = useState(new String())\n  const [baoPrices, setBaoPrices] = useState(new BigNumber(0))\n  const [wethPrices, setWethPrices] = useState(new BigNumber(0))\n\n  const getInfo = useCallback(async () => {\n    if (bao) {\n      const wethPriceFun = getWethPrice(bao).then((response) => {\n        setWethPrices(response)\n\n        const baoPriceFun = getBaoPrice(bao).then((response) => {\n          setBaoPrices(response)\n          const currentRate = wethPrices\n            .dividedBy(100000000)\n            .dividedBy(baoPrices)\n          const userValue = currentRate.multipliedBy(\n            locks.dividedBy(1000000000000000000),\n          )\n          const dailyPrice = userValue.dividedBy(1095).toFormat(2)\n          console.log(dailyPrice + ' dailyPrice')\n          console.log(wethPrices + ' wethprice')\n          console.log(baoPrices + ' baoPrice')\n          const annualPrice = userValue.dividedBy(3).toFormat(2)\n          console.log(annualPrice + ' annual')\n          const wethText = userValue.toFormat(2)\n          const usrSubText =\n            'When this unlocks it will earn you $' +\n            dailyPrice +\n            ' per day for 3 years. The equivalent of $' +\n            annualPrice +\n            ' per year!'\n          setUsrSubText(usrSubText)\n        })\n      })\n    }\n  }, [locks, usrSubText])\n\n  useEffect(() => {\n    if (account && bao) {\n      getInfo()\n    }\n  }, [account, bao, locks, usrSubText])\n\n  return usrSubText.toString()\n}\n\nexport default useSubValues\n"]},"metadata":{},"sourceType":"module"}
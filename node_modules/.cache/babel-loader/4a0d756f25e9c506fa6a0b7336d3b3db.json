{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/mark.wagner/Dropbox/projects/quic.finance/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _regeneratorRuntime from\"/Users/mark.wagner/Dropbox/projects/quic.finance/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mark.wagner/Dropbox/projects/quic.finance/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mark.wagner/Dropbox/projects/quic.finance/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject,_templateObject2,_templateObject3,_templateObject4;import BigNumber from'bignumber.js';import React,{useCallback,useState}from'react';import styled from'styled-components';import Button from'../../../components/Button';import Card from'../../../components/Card';import CardContent from'../../../components/CardContent';import CardIcon from'../../../components/CardIcon';import IconButton from'../../../components/IconButton';import{AddIcon}from'../../../components/icons';import Label from'../../../components/Label';import Value from'../../../components/Value';import{PoolType}from'../../../contexts/Farms/types';import useAllowance from'../../../hooks/useAllowance';import useApprove from'../../../hooks/useApprove';import useModal from'../../../hooks/useModal';import useStake from'../../../hooks/useStake';import useStakedBalance from'../../../hooks/useStakedBalance';import useTokenBalance from'../../../hooks/useTokenBalance';import useUnstake from'../../../hooks/useUnstake';import{getBalanceNumber}from'../../../utils/formatBalance';import DepositModal from'./DepositModal';import WithdrawModal from'./WithdrawModal';var Stake=function Stake(_ref){var lpContract=_ref.lpContract,pid=_ref.pid,tokenName=_ref.tokenName,poolType=_ref.poolType;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),requestedApproval=_useState2[0],setRequestedApproval=_useState2[1];var allowance=useAllowance(lpContract);var _useApprove=useApprove(lpContract),onApprove=_useApprove.onApprove;var tokenBalance=useTokenBalance(lpContract.options.address);var stakedBalance=useStakedBalance(pid);var _useStake=useStake(pid),onStake=_useStake.onStake;var _useUnstake=useUnstake(pid),onUnstake=_useUnstake.onUnstake;var _useModal=useModal(/*#__PURE__*/React.createElement(DepositModal,{max:tokenBalance,onConfirm:onStake,tokenName:tokenName})),_useModal2=_slicedToArray(_useModal,1),onPresentDeposit=_useModal2[0];var _useModal3=useModal(/*#__PURE__*/React.createElement(WithdrawModal,{max:stakedBalance,onConfirm:onUnstake,tokenName:tokenName})),_useModal4=_slicedToArray(_useModal3,1),onPresentWithdraw=_useModal4[0];var handleApprove=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var txHash;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setRequestedApproval(true);_context.next=4;return onApprove();case 4:txHash=_context.sent;// user rejected tx or didn't go thru\nif(!txHash){setRequestedApproval(false);}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);})),[onApprove,setRequestedApproval]);return/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(StyledCardContentInner,null,/*#__PURE__*/React.createElement(StyledCardHeader,null,/*#__PURE__*/React.createElement(CardIcon,null,\"\\uD83D\\uDC68\\uD83C\\uDFFB\\u200D\\uD83C\\uDF73\"),/*#__PURE__*/React.createElement(Value,{value:getBalanceNumber(stakedBalance)}),/*#__PURE__*/React.createElement(Label,{text:\"\".concat(tokenName,\" Tokens Staked\")})),/*#__PURE__*/React.createElement(StyledCardActions,null,!allowance.toNumber()?/*#__PURE__*/React.createElement(Button,{disabled:requestedApproval,onClick:handleApprove,text:\"Approve \".concat(tokenName)}):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{disabled:stakedBalance.eq(new BigNumber(0)),text:\"Unstake\",onClick:onPresentWithdraw}),/*#__PURE__*/React.createElement(StyledActionSpacer,null),poolType!==PoolType.ARCHIVED?/*#__PURE__*/React.createElement(IconButton,{onClick:onPresentDeposit},/*#__PURE__*/React.createElement(AddIcon,null)):'')))));};var StyledCardHeader=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n\\talign-items: center;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\"])));var StyledCardActions=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n\\tdisplay: flex;\\n\\tjustify-content: center;\\n\\tmargin-top: \",\"px;\\n\\twidth: 100%;\\n\"])),function(props){return props.theme.spacing[6];});var StyledActionSpacer=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n\\theight: \",\"px;\\n\\twidth: \",\"px;\\n\"])),function(props){return props.theme.spacing[4];},function(props){return props.theme.spacing[4];});var StyledCardContentInner=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n\\talign-items: center;\\n\\tdisplay: flex;\\n\\tflex: 1;\\n\\tflex-direction: column;\\n\\tjustify-content: space-between;\\n\"])));export default Stake;","map":null,"metadata":{},"sourceType":"module"}
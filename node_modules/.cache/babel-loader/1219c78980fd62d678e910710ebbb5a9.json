{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/mark.wagner/Dropbox/projects/quic.finance/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _regeneratorRuntime from\"/Users/mark.wagner/Dropbox/projects/quic.finance/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mark.wagner/Dropbox/projects/quic.finance/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _createForOfIteratorHelper from\"/Users/mark.wagner/Dropbox/projects/quic.finance/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"/Users/mark.wagner/Dropbox/projects/quic.finance/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import BigNumber from'bignumber.js';import React,{useEffect,useState,Fragment}from'react';import CountUp from'react-countup';import styled from'styled-components';import{useWallet}from'use-wallet';import Card from'../../../components/Card';import CardContent from'../../../components/CardContent';import Label from'../../../components/Label';import Spacer from'../../../components/Spacer';import Value from'../../../components/Value';import QuicIcon from'../../../components/QuicIcon';import useAllEarnings from'../../../hooks/useAllEarnings';import useAllStakedValue from'../../../hooks/useAllStakedValue';import useFarms from'../../../hooks/useFarms';import useTokenBalance from'../../../hooks/useTokenBalance';import useQuic from'../../../hooks/useQuic';import{getQuicAddress,getQuicSupply,getReferrals,getMasterChefContract}from'../../../quic/utils';import{getBalanceNumber}from'../../../utils/formatBalance';var PendingRewards=function PendingRewards(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),start=_useState2[0],setStart=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),end=_useState4[0],setEnd=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),scale=_useState6[0],setScale=_useState6[1];var allEarnings=useAllEarnings();var sumEarning=0;var _iterator=_createForOfIteratorHelper(allEarnings),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var earning=_step.value;sumEarning+=new BigNumber(earning).div(new BigNumber(10).pow(18)).toNumber();}}catch(err){_iterator.e(err);}finally{_iterator.f();}var _useFarms=useFarms(),_useFarms2=_slicedToArray(_useFarms,1),farms=_useFarms2[0];var allStakedValue=useAllStakedValue();if(allStakedValue&&allStakedValue.length){var sumWeth=farms.reduce(function(c,_ref,i){var id=_ref.id;return c+(allStakedValue[i].totalWethValue.toNumber()||0);},0);}useEffect(function(){setStart(end);setEnd(sumEarning);},[sumEarning]);return/*#__PURE__*/React.createElement(\"span\",{style:{transform:\"scale(\".concat(scale,\")\"),transformOrigin:'right bottom',transition:'transform 0.5s',display:'inline-block'}},/*#__PURE__*/React.createElement(CountUp,{start:start,end:end,decimals:end<0?4:end>1e5?0:3,duration:1,onStart:function onStart(){setScale(1.25);setTimeout(function(){return setScale(1);},600);},separator:\",\"}));};var Balances=function Balances(){var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),totalSupply=_useState8[0],setTotalSupply=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),totalReferrals=_useState10[0],setTotalReferrals=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),refLink=_useState12[0],setRefLink=_useState12[1];var quic=useQuic();var quicBalance=useTokenBalance(getQuicAddress(quic));var masterChefContract=getMasterChefContract(quic);var _useWallet=useWallet(),account=_useWallet.account,ethereum=_useWallet.ethereum;useEffect(function(){function fetchTotalSupply(){return _fetchTotalSupply.apply(this,arguments);}function _fetchTotalSupply(){_fetchTotalSupply=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var supply;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getQuicSupply(quic);case 2:supply=_context.sent;setTotalSupply(supply);case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchTotalSupply.apply(this,arguments);}if(quic){fetchTotalSupply();}},[quic,setTotalSupply]);useEffect(function(){function fetchTotalReferrals(){return _fetchTotalReferrals.apply(this,arguments);}function _fetchTotalReferrals(){_fetchTotalReferrals=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var referrals;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getReferrals(masterChefContract,account);case 2:referrals=_context2.sent;setTotalReferrals(referrals);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchTotalReferrals.apply(this,arguments);}if(quic){fetchTotalReferrals();}},[quic,setTotalReferrals]);useEffect(function(){function fetchRefLink(){return _fetchRefLink.apply(this,arguments);}function _fetchRefLink(){_fetchRefLink=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var usrReflink;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:usrReflink='www.quic.finance?ref='+account;setRefLink(usrReflink);case 2:case\"end\":return _context3.stop();}}},_callee3);}));return _fetchRefLink.apply(this,arguments);}if(quic){fetchRefLink();}},[quic,setRefLink]);return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(StyledWrapper,null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(StyledBalances,null,/*#__PURE__*/React.createElement(StyledBalance,null,/*#__PURE__*/React.createElement(QuicIcon,null),/*#__PURE__*/React.createElement(Spacer,null),/*#__PURE__*/React.createElement(\"div\",{style:{flex:1}},/*#__PURE__*/React.createElement(Label,{text:\"Your QUIC Balance\"}),/*#__PURE__*/React.createElement(Value,{value:account?getBalanceNumber(quicBalance):'Locked'}))))),/*#__PURE__*/React.createElement(Footnote,null,\"Pending harvest\",/*#__PURE__*/React.createElement(FootnoteValue,null,/*#__PURE__*/React.createElement(PendingRewards,null),\" QUIC\"))),/*#__PURE__*/React.createElement(Spacer,null),/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(Label,{text:\"Total QUIC Supply\"}),/*#__PURE__*/React.createElement(Value,{value:totalSupply?getBalanceNumber(totalSupply):'Locked'})),/*#__PURE__*/React.createElement(Footnote,null,\"New rewards per block\",/*#__PURE__*/React.createElement(FootnoteValue,null,\"1000 QUIC\")))),/*#__PURE__*/React.createElement(Spacer,null),/*#__PURE__*/React.createElement(Spacer,null),/*#__PURE__*/React.createElement(StyledWrapper,null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(Label,{text:\"Your Referral Link: \"}),/*#__PURE__*/React.createElement(Label,{text:account?refLink:''}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Label,{text:\" Your Referrals: \"}),/*#__PURE__*/React.createElement(Label,{text:account?totalReferrals:'Referrals'})),/*#__PURE__*/React.createElement(Footnote,null,\"Earn future rewards from referrals\",/*#__PURE__*/React.createElement(FootnoteValue,null)))));};var Footnote=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n\\tfont-size: 14px;\\n\\tpadding: 8px 20px;\\n\\tcolor: \",\";\\n\\tborder-top: solid 1px \",\";\\n\"])),function(props){return props.theme.color.grey[400];},function(props){return props.theme.color.grey[300];});var FootnoteValue=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n\\tfont-family: 'Roboto Mono', monospace;\\n\\tfloat: right;\\n\"])));var StyledWrapper=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n\\talign-items: center;\\n\\tdisplay: flex;\\n\\t@media (max-width: 768px) {\\n\\t\\twidth: 100%;\\n\\t\\tflex-flow: column nowrap;\\n\\t\\talign-items: stretch;\\n\\t}\\n\"])));var StyledBalances=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n\\tdisplay: flex;\\n\"])));var StyledBalance=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n\\talign-items: center;\\n\\tdisplay: flex;\\n\\tflex: 1;\\n\"])));export default Balances;","map":null,"metadata":{},"sourceType":"module"}